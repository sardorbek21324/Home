# Бытовой Бот-Помощник

Этот Telegram-бот создан для организации и геймификации бытовых задач в общем доме. Он отслеживает выполнение дел, начисляет баллы за успехи и штрафует за провалы, ведет рейтинг участников и проводит еженедельные челленджи.

## Основной функционал

- **Автоматическое назначение задач**: Бот предлагает задачи по расписанию (готовка, уборка) и назначает исполнителей по ротации в случае молчания.
- **Система баллов**: Участники получают баллы за выполнение задач и теряют их за отказ или провал.
- **Голосования**: Команда подтверждает выполнение задач большинством голосов, что обеспечивает честность.
- **Цепочки задач**: Выполнение одной задачи (например, готовка) запускает следующую (уборка кухни).
- **Еженедельные челленджи**: Дополнительная мотивация в виде соревнований с бонусными баллами для победителей.
- **Месячные итоги**: В конце месяца бот подводит итоги, определяет победителя и обнуляет счетчики для нового цикла.
- **Статистика**: Каждый участник может в любой момент запросить свою статистику по выполненным и проваленным задачам.
- **Админ-панель**: Администратор может управлять некоторыми настройками бота прямо из чата.

## Команды

- `/start` — приветственное сообщение и регистрация участников в чате.
- `/статистика` — показать личную статистику (можно использовать в группе или в личных сообщениях).
- `/рейтинг` — показать текущий рейтинг всех участников за этот месяц.
- `/admin` — (только для администратора) открыть панель управления ботом.

## Установка и запуск

Проект использует Docker для простоты развертывания.

1. **Клонируйте репозиторий:**

   ```bash
   git clone <URL репозитория>
   cd household_bot
   ```

2. **Создайте и заполните файл `.env`:**
   Скопируйте `.env.example` в `.env` и укажите ваши данные: токен бота, ID участников и чата.

3. **Запустите проект:**

   ```bash
   docker-compose up --build
   ```

   Бот автоматически запустится, применит миграции базы данных и начнет работать.

## Тест-план для ручной проверки

1. **Успешная готовка**: дождитесь предложения приготовить еду. Один участник нажимает «Сделаю сейчас». Через 10 минут все голосуют «Да». Исполнитель в личке подтверждает выполнение. Группа голосует «Да». Проверьте, что +20 баллов начислено.
2. **Срыв готовки**: исполнитель берет задачу. На этапе контроля большинство голосует «Нет». Проверьте, что исполнителю начислен штраф, а задача передана следующему по очереди.
3. **Полный игнор**: дождитесь предложения задачи и ничего не делайте 30 минут. Проверьте, что всем начислен штраф -5, а задача помечена как «пропущена».
4. **Еженедельный челлендж**: дождитесь понедельника 10:00. Проверьте старт челленджа. В течение недели выполняйте задачи. В воскресенье вечером проверьте подведение итогов и начисление баллов.
5. **Месячное закрытие**: в последний день месяца в 10:00 админ должен получить запрос в личку. Подтвердите его. Проверьте, что отчет отправлен в группу, а счетчики обнулились на следующий день.
